## 프로세스

```
프로세스는 어디에 저장되나 ┬ 사용자 영역 -> 프로세스 메모리 
						│	: 프로세스가 다루는 데이터
						└ 커널 영역 -> PCB (프로세스 제어 블록)
							: 프로세스를 다루는 데이터
```
### 프로세스 메모리 (=>사용자 영역)
![alt text](<사진/Pasted image 20250909183038.png>)

| 메모리 영역        |                                                                                                                                                                                                                             |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **코드**        | - CPU가 실행할 명령어가 저장된 영역<br>- 읽기 전용 (read-only)<br>- **텍스트 영역**이라고도 부름                                                                                                                                                        |
| **데이터**       | - 프로그램 실행동안 유지(변하지 않는 데이터)<br>- 전역, 정적 변수 (static)                                                                                                                                                                          |
| **힙(Heap)**   | - 프로그래머가 필요에 의해 할당할 수 있는 공간.<br>- 힙영역에 할당한 메모리는 언젠가 반환이 필요하다. (메모리 누수)<br>- 그래서 **가비지 컬랙션**이 작동하는 영역.<br>(프로그래밍 언어가 자동으로 메모리를 해제해주는 기능)<br>- 가비지 컬랙션이 필요할 것 같은 메모리가 저장된다고 생각하면 외우기 쉽다.<br>**예) 객체, 배열, 함수 -> 크기가 가변적인 데이터** |
| **스택(Stack)** | - 일시적으로 사용되는 값을 할당하는 공간<br>- 실행 컨택스트 상으로 생명주기가 정해져 있는 것들이라고 생각하면 외우기 쉽다.<br>**예) 지역 변수(원시값), 매개 변수(참조값), 함수 호출 복귀 주소(컨택스트)**                                                                                                |
**정적 할당 영역 - (코드, 데이터)** => 실행도중 크기가 변하지 않는 메모리 영역
**동적 할당 영역 - (힙, 스택)** => 실행도중 크기가 변하는 메모리 영역

const는 정적 변수인가? -> X

const의 값은 **런타임에 결정**된다. (c / c++ / Java의 static과는 다름)
원시값이면 스택에, 객체면 힙에 저장된다.
![alt text](<사진/Pasted image 20250909184027.png>)

재귀 함수는 어디에 저장될까?

1. **함수 정의 자체는 힙(Heap)에 저장됨**

```js
function factorial(n) { 
	if (n === 1) return 1; 
	return n * factorial(n - 1); 
}
```

 2. **함수 실행 시 생성되는 실행 컨텍스트는 스택(Stack)에 저장됨**

재귀 호출이 일어날 때마다 **새로운 실행 컨텍스트**가 생성되고, **콜 스택에 쌓인다.**

```
factorial(3) → factorial(2) → factorial(1)
```

```
| factorial(1) | 
| factorial(2) | 
| factorial(3) | ← 가장 먼저 호출된 함수가 가장 아래에
```

- 각 컨텍스트에는 **매개변수 값, 지역 변수, 반환 주소** 등이 포함
- **LIFO(Last In, First Out)** 구조로 작동

🔥 재귀 함수가 위험할 수 있는 이유

- 너무 깊은 재귀 호출은 **스택 오버플로우**를 일으킬 수 있다.
- 대부분의 JS 엔진은 **재귀 깊이에 제한**을 두고 있다. (수천~수만 번 정도).

---

### PCB (프로세스 제어 블록) (=>커널 영역)

- 운영체제가 프로세스를 다루기 위해 존재하는,
- **프로세스에 대한 정보**가 담긴 **데이터의 구조** (-> 파이썬에서 **구조체**에 저장되어 있는 이유)

```
<담겨있는 정보>
- 프로세스 ID (PID)
- 사용된 레지스터 값
- 프로세스 상태
- CPU 스케쥴링 정보
- 메모리
- 파일 입출력
```

- **커널 영역**(유저가 제어할 수 없는 데이터 장소) 에 저장
- **프로세스 테이블**에서 여러 PCB를 관리
![alt text](<사진/Pasted image 20250909195504.png>)
프로세스는 **타임 인터럽트**에 의해서 교체되면서 실행된다.
정해진 시간만 cpu 위에 정보를 올리고 실행될 수 있고,
이 때 올라가는 프로세스가 이용하는 정보를 **문맥(context)** 이라고 한다.

**문맥 교환** : 
실행 프로세스가 교체 되면서 중도 데이터(문맥)를 PCB에 백업
다음 프로세스 문맥을 PCB에서 CPU에 로드하는 것.

### 프로세스의 상태

![alt text](<사진/Pasted image 20250909210034.png>)
- **New** - 생성 : 프로세스 생성 중인 상태. PCB를 할당 받아 메모리에 적재된 상태.
- **Ready** - 준비: 지금 바로 CPU에 올라갈 수 있는 상태.
- **Run** - 실행 : 타임 인터럽트가 발생하면 자연스럽게 준비 상태로 들어간다.
- **Wait** - 대기: 대기 상태는 **입출력 요청**이나 **바로 확보할 수 없는 자원**을 요청 할 때 발생.
- **Terminated, Exit** - 종료: 프로세스가 완전히 끝난 상태.


### 블로킹 / 논블로킹 입출력

동기 / 비동기 입출력

